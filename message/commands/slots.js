const { fetchJson } = require('../../lib/utils');

module.exports = {
    name: 'tragamonedas',
    description: 'Juega al tragamonedas',
    aliases: ['slots'],

    async execute(sock, m) {
        try {
            
            async function sleep(ms) {
                return new Promise(resolve => setTimeout(resolve, ms));
            }
            const data = await fetchJson('https://iam-zio.replit.app/api/slots?key=zio');
            const result = data.game.message;
            
            function Win() {
                if (result.includes('Ganaste')) {
                    return `â•°â”€â”€â²â‹…á§â‹… *ğš†ğ™¸ğ™½* â‹…â‹…â³â”€â”€â•¯\n\n*â—¯â”€â² ğ™¶ğ™°ğ™½ğ™°ğš‚ğšƒğ™´ â³â”€â—¯*`;
                } else if (result.includes('Perdiste')) {
                    return `*â•°â”€â”€â²â‹…ğ™»ğ™¾ğš‚ğ™´ğšá§â³â”€â”€â•¯*\n\n*â—¯â”€â² ğ™¿ğ™´ğšğ™³ğ™¸ğš‚ğšƒğ™´ â³â”€â—¯*`;
                }
            }
            
            async function slotsRun() {
                let { key } = await sock.sendMessage(m.chat, { text: `ã…¤ *â‹¯â‹¯ TRAGAMONEDAS â‹¯â‹¯*\n\nâ—¯â”€â”€â² Iniciando... â³\n\n*á´€á´˜Éª@á´¢Éªá´á´*` });
                await sleep(2000);
                var slots = [
                    `*â—¯â”€â² ğšƒğšğ™°ğ™¶ğ™°ğ™¼ğ™¾ğ™½ğ™´ğ™³ğ™°ğš‚ â³â”€â—¯*

â•­â”€â”€â² *á§á´‹á´€á´Ê€Éªá§* â³â”€â”€â•®
â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”‚  â—¯
*â”‚ğŸ“â”‚ğŸâ”‚ğŸ‘â”œâ”€â•¯*
â”‚ğŸ‹â”‚ğŸ‡â”‚ğŸ“â”‚
â•°â”€â”€â² *ğ™¹ğš„ğ™´ğ™¶ğ™°* â³â”€â”€â•¯

*â—¯â”€â² ğ™°ğ™¿ğš„ğ™´ğš‚ğšƒğ™° â³â”€â—¯*
â¤ *100*

*á´€á´˜ÉªÂ©á´¢Éªá´*`,
                    `*â—¯â”€â² ğšƒğšğ™°ğ™¶ğ™°ğ™¼ğ™¾ğ™½ğ™´ğ™³ğ™°ğš‚ â³â”€â—¯*

â•­â”€â”€â² *á§á´‹á´€á´Ê€Éªá§* â³â”€â”€â•®
â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”‚
*â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”œâ”€â•®*
â”‚ğŸ‹â”‚ğŸ‡â”‚ğŸ“â”‚  â—¯
â•°â”€â² *ğ™»ğ™¾ğ™°ğ™³ğ™¸ğ™½ğ™¶* â³â”€â•¯

*â—¯â”€â² ğ™°ğš™ğš„ğ™´ğš‚ğšƒğ™° â³â”€â—¯*
â¤ *100*

*á´€á´˜ÉªÂ©á´¢Éªá´*`,
                    `*â—¯â”€â² ğšƒğšğ™°ğ™¶ğ™°ğ™¼ğ™¾ğ™½ğ™´ğ™³ğ™°ğš‚ â³â”€â—¯*

â•­â”€â”€â² *á§á´‹á´€á´Ê€Éªá§* â³â”€â”€â•®
â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”‚
*â”‚ğŸ‘â”‚ğŸŠâ”‚ğŸâ”œâ”€â•®*
â”‚ğŸ‹â”‚ğŸ‡â”‚ğŸ“â”‚  â—¯
â•°â”€â² *ğ™»ğ™¾ğ™°ğ™³ğ™¸ğ™½ğ™¶* â³â”€â•¯

*â—¯â”€â² ğ™°ğš™ğš„ğ™´ğš‚ğšƒğ™° â³â”€â—¯*
â¤ *100*

*á´€á´˜ÉªÂ©á´¢Éªá´*`,
                    `*â—¯â”€â² ğšƒğšğ™°ğ™¶ğ™°ğ™¼ğ™¾ğ™½ğ™´ğ™³ğ™°ğš‚ â³â”€â—¯*

â•­â”€â”€â² *á§á´‹á´€á´Ê€Éªá§* â³â”€â”€â•®
â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”‚
*â”‚ğŸŠâ”‚ğŸ‡â”‚ğŸ“â”œâ”€â•®*
â”‚ğŸ‹â”‚ğŸ‡â”‚ğŸ“â”‚  â—¯
â•°â”€â² *ğ™»ğ™¾ğ™°ğ™³ğ™¸ğ™½ğ™¶* â³â”€â•¯

*â—¯â”€â² ğ™°ğš™ğš„ğ™´ğš‚ğšƒğ™° â³â”€â—¯*
â¤ *100*

*á´€á´˜ÉªÂ©á´¢Éªá´*`,
                    `*â—¯â”€â² ğšƒğšğ™°ğ™¶ğ™°ğ™¼ğ™¾ğ™½ğ™´ğ™³ğ™°ğš‚ â³â”€â—¯*

â•­â”€â”€â² *á§á´‹á´€á´Ê€Éªá§* â³â”€â”€â•®
â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”‚
*â”‚ğŸ‹â”‚ğŸ‹â”‚ğŸâ”œâ”€â•®*
â”‚ğŸ‹â”‚ğŸ‡â”‚ğŸ“â”‚  â—¯
â•°â”€â² *ğ™»ğ™¾ğ™°ğ™³ğ™¸ğ™½ğ™¶* â³â”€â•¯

*â—¯â”€â² ğ™°ğš™ğš„ğ™´ğš‚ğšƒğ™° â³â”€â—¯*
â¤ *100*

*á´€á´˜ÉªÂ©á´¢Éªá´*`,
                    `*â—¯â”€â² ğšƒğšğ™°ğ™¶ğ™°ğ™¼ğ™¾ğ™½ğ™´ğ™³ğ™°ğš‚ â³â”€â—¯*

â•­â”€â”€â² *á§á´‹á´€á´Ê€Éªá§* â³â”€â”€â•®
â”‚ğŸ‡â”‚ğŸ‹â”‚ğŸ’â”‚  â—¯
*â”‚${data.game.casino[0]}â”‚${data.game.casino[1]}â”‚${data.game.casino[2]}â”œâ”€â•¯*
â”‚ğŸ‹â”‚ğŸ‡â”‚ğŸ“â”‚
${Win()}
â¤ *${data.game.coins}*

*á´€á´˜ÉªÂ©á´¢Éªá´*`
                ];
                for (let i = 0; i < slots.length; i++) {
                    await sock.sendMessage(m.chat, {text: slots[i], edit: key});
                    await sleep(1000)
                }
            }
            
            await slotsRun();

        } catch (error) {
            console.error(error);
            await sock.sendMessage(m.chat, { text: 'Error al procesar el comando.' }, { quoted: m });
        }
    },
};
